<!--- $Id$ --->

<div class="xar-mod-head"><span class="xar-mod-title"><xar:mlstring>Autolinks Administration</xar:mlstring></span></div>
<div class="xar-mod-body"><h2><xar:mlstring>View Autolinks</xar:mlstring></h2><br />
<div style="margin: auto;">
<xar:if condition="!empty($items)">
<table width="100%" border="1" cellspacing="0" cellpadding="4">
    <tr>
        <th><xar:mlstring>Type</xar:mlstring></th>
        <th><xar:mlstring>Name</xar:mlstring></th>
        <th><xar:mlstring>Matching Key</xar:mlstring></th>
        <th><xar:mlstring>URL</xar:mlstring></th>
        <th><xar:mlstring>Options</xar:mlstring></th>
    </tr>
    <xar:foreach in="$items" value="$item">
        <!--- TODO: set classes rather than style colours --->
        <xar:if condition="!empty($item['enabled'])">
            <xar:set name="$bgrow">'#DDFFDD'</xar:set>
        <xar:else/>
            <xar:set name="$bgrow">'#FFDDDD'</xar:set>
        </xar:if>

        <tr style="background-color: #$bgrow#;">
            <td><a href="#$item['edittypeurl']#">#xarVarPrepForDisplay($item['type_name'])#</a></td>

            <td><a href="#$item['editurl']#">#xarVarPrepForDisplay($item['name'])#</a></td>

            <td>
                <xar:if condition="!empty($item['comment'])">
                    <span title="#xarVarPrepForDisplay($item['comment'])#">#xarVarPrepForDisplay($item['keyword'])#</span>
                <xar:else/>
                    #xarVarPrepForDisplay($item['keyword'])#
                </xar:if>
            </td>

            <td>
                <xar:if condition="!empty($item['title'])">
                    <span title="#xarVarPrepForDisplay($item['title'])#">#xarVarPrepForDisplay($item['url'])#</span>
                <xar:else/>
                    #xarVarPrepForDisplay($item['url'])#
                </xar:if>
            </td>

            <td align="center">
                <xar:if condition="empty($item['enableurl'])">
                    #$item['enablelabel']# |
                <xar:else />
                    <a href="#$item['enableurl']#">#$item['enablelabel']#</a> |
                </xar:if>
                <xar:if condition="empty($item['editurl'])">
                    <xar:mlstring>Edit</xar:mlstring> |
                <xar:else />
                    <a href="#$item['editurl']#"><xar:mlstring>Edit</xar:mlstring></a> |
                </xar:if>
                <xar:if condition="empty($item['deleteurl'])">
                    <xar:mlstring>Delete</xar:mlstring>
                <xar:else />
                    <a href="#$item['deleteurl']#"><xar:mlstring>Delete</xar:mlstring></a>
                </xar:if>
            </td>
        </tr>

        <xar:if condition="xarModGetVar('autolinks', 'showsamples') and !empty($item['sample'])">
        <tr>
            <td colspan="3"><strong><xar:mlstring>Sample:</xar:mlstring></strong>
            <div>#xarVarPrepForDisplay($item['sample'])#</div></td>
            <td colspan="2"><strong><xar:mlstring>Result:</xar:mlstring></strong>
            <div>#$item['sampleresult']#</div></td>
        </tr>
        </xar:if>
    </xar:foreach>
</table>
<br />

<!-- add the pager here -->
#$pager#

<xar:else/>
<xar:mlstring>No Autolinks defined</xar:mlstring>
</xar:if>
</div>
</div>
