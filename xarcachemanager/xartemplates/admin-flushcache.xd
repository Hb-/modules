<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<div class="xar-mod-head"><span class="xar-mod-title"><xar:mlstring>xarCacheManager Administration</xar:mlstring></span></div>
<div class="xar-mod-body"><h2><xar:mlstring>Flush Output Cache Files</xar:mlstring></h2>
<div style="margin: auto;">
<xar:if condition="$message eq false">
    <form action="#xarModURL('xarcachemanager', 'admin', 'flushcache')#" method="post" enctype="application/x-www-form-urlencoded">
        <div style="clear: both; padding: 10px;">
            <input type="hidden" name="authid" id="authid" value="#$authid#" />
            <input type="hidden" name="confirm" id="confirm" value="true" />
            <span style="align: center">
                #$instructions#
            </span>
            <table border="0" cellpadding="8" cellspacing="0">
                <tr>
                    <td>
                        <span class="help" title="#$instructionhelp#"><label for="flushkey"><xar:mlstring>Cache Key</xar:mlstring></label></span>:
                    </td>
                    <td>
                        <select name="flushkey" id="flushkey" size="1">
                            <option value="-" selected="selected"> - - - </option>
                            <xar:loop name="$cachekeys">
                                <option value="#$loop:item#">
                                    #$loop:item#
                                </option>
                            </xar:loop>
                            <xar:if condition="$empty ne 1">
                            <xar:loop name="$cachedirs">
                                <option value="#$loop:item#">
                                     * Flush all #$loop:key# cache keys * 
                                </option>
                            </xar:loop>
                            <option value=""> * Flush all cache keys * </option>
                            </xar:if>
                        </select>
                    </td>
                    <td>
                        <input type="submit" value="Flush"  />
                    </td>
                </tr>
            </table>
        </div>
     </form>
<xar:elseif condition="$message eq true" />

    <div style="clear: both; padding: 10px;">
        <span>
            #$notice#
        </span>
    </div>
    <div style="clear: both; padding: 10px;">
        <span>
            <a href="#$returnlink.url#" title="#$returnlink.title#">#$returnlink.label#</a>
        </span>
    </div>
</xar:if>
<div style="clear: both; padding: 10px;"><xar:mlstring>The Output Cache size is currently:</xar:mlstring> #$cachesize#</div>
<div style="clear: both; padding: 10px;">
    <table border="1">
        <thead>
            <tr>
                <th><xar:mlstring>Directory</xar:mlstring></th>
                <th><xar:mlstring>Size in MB</xar:mlstring></th>
            </tr>
        </thead>
        <tbody>
            <xar:foreach in="$outputdirs" value="$outputdir">
                <tr>
                    <td>#$outputdir['name']#</td>
                    <td>#$outputdir['size']#</td>
                </tr>
            </xar:foreach>
        </tbody>
    </table>
</div>
</div>
</div>
