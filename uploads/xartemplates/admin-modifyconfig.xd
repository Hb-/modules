<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>Uploads Administration</xar:mlstring>
    </span>
</div>

<div class="xar-mod-body">
    <h2>
        <xar:mlstring>Modify Uploads Configuration</xar:mlstring>
    </h2>
    <div style="margin: auto;">

        <form method="post" action="#xarModUrl('uploads', 'admin', 'updateconfig')#">
            <input type="hidden" name="authid" value="#$authid#">
            <p>
                <strong><xar:mlstring>Uploads Directory</xar:mlstring>:</strong>&nbsp;&nbsp;
                <input type="text" name="path[uploads-directory]" value="#$path['uploads-directory']#" size="70">
                <br />
                <xar:mlstring>
                    This is the full path to the directory where uploaded and external import files will be placed. 
                    It is stronly recommended that this directory be located outside of your web directory.
                    <br />NOTE: This directory MUST be writable by the webserver.
                </xar:mlstring>
            </p>
            <p>
                <strong>
                    <xar:mlstring>
                        Trusted Directory:
                    </xar:mlstring>
                </strong>&nbsp;&nbsp;
                <input type="text" name="path[imports-directory]" value="#$path['imports-directory']#" size="70">
                <br />
                <xar:mlstring>
                    This is the full path to the local trusted directory. Files located in this directory will 
                    be immediately available for users to attach to other objects (ie: articles). Files in this directory 
                    are <strong>not</strong> counted in the disk usage summary totals. It is strongly recommended 
                    that this directory be located outside of your web directory. 
                    <br />NOTE: This directory MUST be readable and should <strong>not</strong> be writable by the webserver.
                </xar:mlstring>
            </p>

                <strong>
                    <xar:mlstring>
                        Maximum Upload Size in bytes (commas are fine):
                    </xar:mlstring>
                </strong>&nbsp;&nbsp;
                <input type="text" name="file[maxsize]" value="#$file['maxsize']#">
                <br />
                <xar:mlstring>
                    This is the maximum size an uploaded file may be.<br />
                    NOTE: The server wide PHP setting, if set to a lower value, <em>will</em> override this setting. 
                    Please ask your web host provider for details on the settings that they use for uploaded files.
                </xar:mlstring>
            </p>
            <p>
                <strong>
                    <xar:mlstring>
                        Confirm deletion of files:
                    </xar:mlstring>
                </strong>&nbsp;&nbsp;
                
                <xar:if condition="$file['delete-confirmation'] eq FALSE">
                    <input type="radio" name="file[delete-confirmation]" value="1"> Yes
                    <input type="radio" name="file[delete-confirmation]" value="0" checked="true"> No
                <xar:else />
                    <input type="radio" name="file[delete-confirmation]" value="1" checked="true"> Yes
                    <input type="radio" name="file[delete-confirmation]" value="0"> No
                </xar:if>
                <br/>
                <xar:mlstring>
                    Confirmation must be provided before files are deleted.
                </xar:mlstring>
            </p>
            <p>
                <strong>
                    <xar:mlstring>
                        Auto purge files marked as 'rejected':
                    </xar:mlstring>
                </strong>&nbsp;&nbsp;
                    
                <xar:if condition="$file['auto-purge'] eq FALSE">
                    <input type="radio" name="file[auto-purge]" value="1"> Yes
                    <input type="radio" name="file[auto-purge]" value="0" checked="true"> No
                <xar:else />
                    <input type="radio" name="file[auto-purge]" value="1" checked="true"> Yes
                    <input type="radio" name="file[auto-purge]" value="0"> No
                </xar:if>
                <br/>
                <xar:mlstring>
                    Normally, when you reject files, have to manually purge them by clicking on 
                    the 'Purge Rejected' button located on the <em>Admin->Uploads->View page</em>. This 
                    option forces any file you set to 'rejected' status to be deleted right away.
                </xar:mlstring>
            </p>
            <p>
                <strong>
                    <xar:mlstring>
                        Obfuscate/Secure Imported Files:
                    </xar:mlstring>
                </strong>&nbsp;&nbsp;
                <xar:if condition="$file['obfuscate-on-import'] eq FALSE">
                    <input type="radio" name="file[obfuscate-on-import]" value="1"> Yes
                    <input type="radio" name="file[obfuscate-on-import]" value="0" checked="true"> No
                <xar:else />
                    <input type="radio" name="file[obfuscate-on-import]" value="1" checked="true"> Yes
                    <input type="radio" name="file[obfuscate-on-import]" value="0"> No        
                </xar:if>
                <br />
                <xar:mlstring>
                    If Yes, imported files will be stored with their original names obfuscated for added security.
                </xar:mlstring>
            </p>
            <p>
                <strong>
                    <xar:mlstring>
                        Obfuscate/Secure Uploaded Files:
                    </xar:mlstring>
                </strong>&nbsp;&nbsp;
                <xar:if condition="$file['obfuscate-on-upload'] eq FALSE">
                    <input type="radio" name="file[obfuscate-on-upload]" value="1"> Yes
                    <input type="radio" name="file[obfuscate-on-upload]" value="0" checked="true"> No
                <xar:else />
                    <input type="radio" name="file[obfuscate-on-upload]" value="1" checked="true"> Yes
                    <input type="radio" name="file[obfuscate-on-upload]" value="0"> No        
                </xar:if>
                <br />
                <xar:mlstring>
                    If Yes, uploaded files will be stored with their original names obfuscated for added security.
                    <br />
                    <strong style="color: red;">NOTE:</strong>Setting this option to 'No' can open a possible route for users
                    to upload and run malicious scripts on your site. It is <strong>highly</strong>
                    recommended that you leave this option on unless you have a throrough understanding
                    of the implications behind turning it off.
                </xar:mlstring>
            </p>
            
            <h2>
                <xar:mlstring>Dynamic File Upload Property Configuration</xar:mlstring>
            </h2>
            <xar:mlstring>
                <p>
                    These settings allow you to redefine certain characteristics of the FileUpload DynamicData Property. 
                    These settings only take effect if you have 'hooked' the uploads module to the module using the 
                    FileUpload property.
                </p>
            </xar:mlstring>
            
            <strong>
                <xar:mlstring>
                    Select available file sources for the FileUpload Property:
                </xar:mlstring>
            </strong>
            <xar:mlstring>
                <p>
                Note: be sure to choose at <strong>least</strong> one!
                </p>
            </xar:mlstring>
            <div>
                <span>
                    <xar:if condition="$ddprop['trusted'] eq TRUE">
                        <input type="checkbox" name="ddprop[trusted]" value="1" checked="checked">
                    <xar:else />
                        <input type="checkbox" name="ddprop[trusted]" value="1">
                    </xar:if>
                </span>
                <span>
                    <xar:mlstring>Files located in the Trusted directory</xar:mlstring>
                </span>
            </div>
            <div>
                <span>
                    <xar:if condition="$ddprop['external'] eq TRUE">
                        <input type="checkbox" name="ddprop[external]" value="1" checked="checked">
                    <xar:else />
                        <input type="checkbox" name="ddprop[external]" value="1">
                    </xar:if>
                </span>
                <span>
                    <xar:mlstring>Externally located files (http / ftp / file)</xar:mlstring>
                </span>
            </div>
            <div>
                <span>
                    <xar:if condition="$ddprop['upload'] eq TRUE">
                        <input type="checkbox" name="ddprop[upload]" value="1" checked="checked">
                    <xar:else />
                        <input type="checkbox" name="ddprop[upload]" value="1">
                    </xar:if>
                </span>
                <span>
                    <xar:mlstring>User uploaded files</xar:mlstring>
                </span>
            </div>
            <div>
                <span>
                    <xar:if condition="$ddprop['stored'] eq TRUE">
                        <input type="checkbox" name="ddprop[stored]" value="1" checked="checked">
                    <xar:else />
                        <input type="checkbox" name="ddprop[stored]" value="1">
                    </xar:if>
                </span>
                <span>
                    <xar:mlstring>Files previously stored</xar:mlstring>
                </span>
            </div>

                <input type="submit" name="update" value="#xarMl('Update Configuration')#">
            </p>
        </form>
    </div>
</div>
