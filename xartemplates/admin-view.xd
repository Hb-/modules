<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<div class="xar-mod-head">
    <span class="xar-mod-title"><xar:mlstring>Userpoints Administration</xar:mlstring></span>
</div>
<div class="xar-mod-body">
    <xar:template type="module" module="userpoints" file="admin-menu" />
    <h2><xar:mlstring>View Statistics</xar:mlstring></h2>
    <xar:if condition="empty($modid)">
        <table class="xar-fullwidth xar-noborder"  cellpadding="2" cellspacing="1">
            <tr>
                <th class="xar-align-center xar-valign-middle" width="20%">
                    <xar:mlstring>Module Name</xar:mlstring>
                </th>
                <th class="xar-align-center xar-valign-middle"  width="20%">
                    <xar:mlstring>Module Items</xar:mlstring>
                </th>
                <th class="xar-align-center xar-valign-middle"  width="20%">
                    <xar:mlstring>Total Ratings</xar:mlstring>
                </th>
                <th class="xar-align-center xar-valign-middle"  width="20%">
                    <xar:mlstring>Action</xar:mlstring>
                </th>
            </tr>

            <xar:if condition="empty($moditems) or count($moditems) eq '0'">
                <tr>
                    <td colspan="4" class="xar-align-center">
                        <p>
                        <xar:mlstring>
                            There are currently no ratings in the database...
                        </xar:mlstring>
                        </p>
                    </td>
                </tr>
            <xar:else />
                <xar:foreach in="$moditems" value="$moditem">
                    <tr>
                        <td class="xar-align-center xar-valign-middle" width="20%">
                            <a href="#$moditem['link']#">#$moditem['name']#</a>
                        </td>
                        <td class="xar-align-center xar-valign-middle" width="20%">
                            #$moditem['numitems']#
                        </td>
                        <td class="xar-align-center xar-valign-middle" width="20%">
                            #$moditem['numratings']#
                        </td>
                        <td class="xar-align-center xar-valign-middle" width="20%">
                            <a href="#$moditem['delete']#"><strong>Delete</strong></a>
                        </td>
                    </tr>
                </xar:foreach>
                <tr>
                    <td class="xar-align-center xar-valign-middle" width="20%">
                        <strong><xar:mlstring>Grand Total</xar:mlstring></strong>
                    </td>
                    <td class="xar-align-center xar-valign-middle" width="20%">
                        <strong>#$numitems#</strong>
                    </td>
                    <td class="xar-align-center xar-valign-middle" width="20%">
                        <strong>#$numratings#</strong>
                    </td>
                    <td class="xar-align-center xar-valign-middle" width="20%">
                        <a href="#$delete#">Delete All</a>
                    </td>
                </tr>
            </xar:if>

            <tr>
                <td colspan="4">
                    <div class="xar-accent xar-norm-outline xar-margin-topthick">
                        <xar:mlstring>
                            By clicking on <strong>Delete</strong> you can delete all ratings associated with a particular
                            module. Clicking on a module will take you to that module's statistics page containing
                            the figures for each of that module's items that have ratings associated with them.
                            From there you can delete all ratings associated with a particular item.
                        </xar:mlstring>
                    </div>
                </td>
            </tr>
        </table>
<xar:else/>
    <h3><xar:ml><xar:mlstring>Module #(1)</xar:mlstring><xar:mlvar>#$modname#</xar:mlvar></xar:ml></h3>

        <table class="xar-fullwidth xar-noborder"  cellpadding="2" cellspacing="1">
            <tr>
                <th class="xar-align-center xar-valign-middle" width="25%">
                    <xar:if condition="empty($sortlink['itemid'])">
                        <xar:mlstring>Item Id</xar:mlstring>
                    <xar:else/>
                        <a href="#$sortlink['itemid']#"><xar:mlstring><strong>Item<br />Id</strong></xar:mlstring></a>
                    </xar:if>
                </th>
                <th class="xar-align-center xar-valign-middle" width="25%">
                    <xar:if condition="empty($sortlink['numratings'])">
                        <xar:mlstring>Total Ratings</xar:mlstring>
                    <xar:else/>
                        <a href="#$sortlink['numratings']#"><xar:mlstring>Total Ratings</xar:mlstring></a>
                    </xar:if>
                </th>
                <th class="xar-align-center xar-valign-middle" width="25%">
                    <xar:if condition="empty($sortlink['rating'])">
                        <xar:mlstring>Current Rating</xar:mlstring>
                    <xar:else/>
                        <a href="#$sortlink['rating']#"><xar:mlstring>Current Rating</xar:mlstring></a>
                    </xar:if>
                </th>
                <th class="xar-align-center xar-valign-middle" width="25%">
                    <xar:mlstring>Action</xar:mlstring>
                </th>
            </tr>

            <xar:if condition="empty($moditems) or count($moditems) eq '0'">
                <tr>
                    <td colspan="4" class="xar-align-center">
                        <p>
                        <xar:mlstring>
                            There are currently no ratings attached to this module...
                        </xar:mlstring>
                        </p>
                    </td>
                </tr>
            <xar:else />
                <xar:foreach in="$moditems" key="$itemid" value="$moditem">
                    <tr>
                        <td  class="xar-align-center xar-valign-middle" width="25%">
                            #$itemid#
                        </td>
                        <td  class="xar-align-center xar-valign-middle" width="25%">
                            #$moditem['numratings']#
                        </td>
                        <td  class="xar-align-center xar-valign-middle" width="25%">
                            #$moditem['rating']#
                        </td>
                        <td  class="xar-align-center xar-valign-middle" width="25%">
                            <a href="#$moditem['delete']#"><strong>Delete</strong></a>
                        </td>
                    </tr>
                </xar:foreach>
                <tr>
                    <td  class="xar-align-right xar-valign-middle" width="25%">
                        <strong><xar:mlstring>Grand Total</xar:mlstring></strong>:
                    </td>
                    <td  class="xar-align-center xar-valign-middle" width="25%">
                        <strong>#$numratings#</strong>
                    </td>
                    <td  class="xar-align-center xar-valign-middle" width="25%">
                        <strong><xar:mlstring>N/A</xar:mlstring></strong>
                    </td>
                    <td  class="xar-align-center xar-valign-middle" width="25%">
                        <a href="#$delete#"><xar:mlstring>Delete All</xar:mlstring></a>
                    </td>
                </tr>
            </xar:if>

            <tr>
                <td colspan="4">
                    <div class="xar-accent xar-norm-outline">
                        <xar:mlstring>
                            By clicking on <strong>Delete</strong> you can delete all ratings associated with a particular
                            module's item.
                        </xar:mlstring>
                    </div>
                </td>
            </tr>
        </table>
</xar:if>
</div>

