<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>Newsletter Administration</xar:mlstring>
    </span>
</div>
<div class="xar-mod-body">
<xar:template file="navtab" type="module" />
    <xar:if condition="!empty($publications)">
        <form name="post" id="post" action="&xar-modurl-newsletter-admin-importaltsubscription;" method="post" enctype="application/x-www-form-urlencoded">
            <input type="hidden" name="authid" id="authid" value="#$authid#" />
            <fieldset>
                <legend>
                    <xar:mlstring>Import Options</xar:mlstring>
                </legend>
                <p><xar:mlstring>You can import a list of contacts into your subscription using a CSV (comma separated values) or other delimited export.</xar:mlstring></p>
                <p><xar:mlstring>For a CSV export, the fields should be in the format: </xar:mlstring><code><xar:mlstring>firstname,lastname,email</xar:mlstring></code></p>
                <p><xar:mlstring>For example, the following CSV will be parsed correctly: </xar:mlstring></p>
                <ul>
                    <li><xar:mlstring>&nbsp;&nbsp;frodo,baggins,fbaggins@bagend.com</xar:mlstring></li>
                    <li><xar:mlstring>&nbsp;&nbsp;"samwise,gamgee",sgamgee@bagend.com</xar:mlstring></li>
                    <li><xar:mlstring>&nbsp;&nbsp;"peregrin,took",ptook@bagend.com SMTP ptook@bagend.com</xar:mlstring></li>
                </ul>
            </fieldset>
            <fieldset>
                <legend>
                    <xar:mlstring>Import Data</xar:mlstring>
                </legend>
                <div class="xar-form-input-wrapper">
                    <label for="import" class="xar-form-label" title="#xarML('CSV fields.')#">
                        <xar:mlstring>Insert CSV fields:</xar:mlstring>
                    </label>
                    <textarea id="import" name="import" rows="15" cols="50" tabindex="10"></textarea>
                </div>
                <div class="xar-form-input-wrapper">
                    <label for="delim" class="xar-form-label" title="#xarML('Delimitor.')#">
                        <xar:mlstring>Delimitor:</xar:mlstring>
                    </label>
                    <input type="text" name="delim" id="delim" value="," size="2" maxlength="2" tabindex="11" />
                </div>
            </fieldset>
            <fieldset>
                <legend>
                    <xar:mlstring>Mail Options</xar:mlstring>
                </legend>
                <div class="xar-form-input-wrapper">
                    <label for="htmlmail" class="xar-form-label" title="#xarML('HTML Mail.')#">
                        <xar:mlstring>HTML Mail</xar:mlstring>
                    </label>
                    <input type="checkbox" name="htmlmail" id="htmlmail" value="1" checked="checked" />
                </div>
            </fieldset>
            <fieldset>
                <legend>
                    <xar:mlstring>Choose which publication(s) to add new subscription:</xar:mlstring>
                </legend>
                <xar:loop name="$publications">
                    <div class="xar-form-input-wrapper">
                        <label for="pids[]" class="xar-form-label" title="#xarML('Publication name.')#">
                            #$loop:item['title']#
                        </label>
                        <input type="checkbox" name="pids[]" id="pids[]" value="#$loop:item['id']#"/>
                    </div>
                </xar:loop>
            </fieldset>
            <div class="xar-form-input-wrapper-after">
                <input type="submit" value="#xarML('Import')#" />
            </div>
        </form>
    <xar:else />
        <div class="xar-form-input-wrapper">
            <xar:mlstring>Sorry - there are no publications available at this time.</xar:mlstring>
        </div>
    </xar:if>
</div>
