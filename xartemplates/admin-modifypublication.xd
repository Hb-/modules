<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>Newsletter Administration</xar:mlstring>
    </span>
</div>
<div class="xar-mod-body">
    <h2><xar:mlstring>Modify Publication</xar:mlstring></h2>
    <form name="post" id="post" action="&xar-modurl-newsletter-admin-updatepublication;" method="post" enctype="application/x-www-form-urlencoded">
        <fieldset>
            <legend>
                <xar:mlstring>General settings</xar:mlstring>
            </legend>
            <input type="hidden" name="authid" id="authid" value="#$authid#" />
            <input type="hidden" name="id" id="id" value="#$publication['id']#" />
            <div class="xar-form-input-wrapper">
                <label for="ownerId" title="#xarML('Owner Name')#" class="xar-form-label">
                    <xar:mlstring>Owner Name:</xar:mlstring>
                </label>
                <select id="ownerId" name="ownerId" tabindex="1">
                    <xar:loop name="$publication['owners']">
                        <xar:if condition="$loop:item['id'] eq $publication['ownerId']">
                            <option name="id" value="#$loop:item['id']#" selected="selected">#$loop:item['name']#</option>
                        <xar:else />
                            <option name="id" value="#$loop:item['id']#">#$loop:item['name']#</option>
                        </xar:if>
                    </xar:loop>
                </select>
            </div>
            <div class="xar-form-input-wrapper">
                <xar:if condition="$publication['number_of_categories'] != 0">
                    <label for="categoryId" title="#xarML('Publication Category')#" class="xar-form-label">
                        <xar:mlstring>Publication Category:</xar:mlstring>
                    </label>
                    <select id="categoryId" name="categoryId" tabindex="2">
                        <xar:loop name="$publication['categories']">
                            <xar:if condition="$loop:item['cid'] eq $publication['cid']">
                                <option name="cid" value="#$loop:item['cid']#" selected="selected">#$loop:item['name']#</option>
                            <xar:else />
                                <option name="cid" value="#$loop:item['cid']#">#$loop:item['name']#</option>
                            </xar:if>
                        </xar:loop>
                    </select>
                </div>
                <div class="xar-form-input-wrapper">
                    <label for="altcids[]" title="#xarML('Alternative Categories')#" class="xar-form-label">
                        <xar:mlstring>Alternative Categories:</xar:mlstring>
                    </label>
                    <select id="altcids[]" name="altcids[]" tabindex="3" multiple="multiple" size="5">
                        <xar:loop name="$altcategories">
                            <xar:if condition="$loop:item['selected'] eq 0">
                                <option name="id" value="#$loop:item['cid']#" >#$loop:item['name']#</option>
                            <xar:else />
                                <option name="id" value="#$loop:item['cid']#" selected="selected">#$loop:item['name']#</option>
                            </xar:if>
                        </xar:loop>
                    </select>
                <xar:else />
                    <input type="hidden" name="categoryId" id="categoryId" value="#$publication['number_of_categories']#" />
                </xar:if>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="title" title="#xarML('Title')#" class="xar-form-label">
                    <xar:mlstring>Title:</xar:mlstring>
                </label>
                <input type="text" name="title" id="title" value="#xarVarPrepForDisplay($publication['title'])#" size="50" maxlength="255" tabindex="4" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="introduction" title="#xarML('Introduction')#" class="xar-form-label">
                    <xar:mlstring>Introduction:</xar:mlstring>
                </label>
                <textarea id="introduction" name="introduction" rows="10" cols="50" tabindex="5">#xarVarPrepForDisplay($publication['introduction'])#</textarea>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="templateHTML" title="#xarML('HTML Template')#" class="xar-form-label">
                    <xar:mlstring>HTML Template:</xar:mlstring>
                </label>
                <input type="text" name="templateHTML" id="templateHTML" value="#xarVarPrepForDisplay($publication['templateHTML'])#" size="50" maxlength="50" tabindex="6" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="templateText" title="#xarML('Text Template')#" class="xar-form-label">
                    <xar:mlstring>Text Template:</xar:mlstring>
                </label>
                <input type="text" name="templateText" id="templateText" value="#xarVarPrepForDisplay($publication['templateText'])#" size="50" maxlength="50" tabindex="7" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="fromname" title="#xarML('Default is owners name')#" class="xar-form-label">
                    <xar:mlstring>Email From Name:</xar:mlstring>
                </label>
                <input type="text" name="fromname" id="fromname" value="#xarVarPrepForDisplay($publication['fromname'])#" size="50" maxlength="100" tabindex="8" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="fromemail" title="#xarML('Default is owners email address')#" class="xar-form-label">
                    <xar:mlstring>Email From Address:</xar:mlstring>
                </label>
                <input type="text" name="fromemail" id="fromemail" value="#xarVarPrepForDisplay($publication['fromemail'])#" size="50" maxlength="100" tabindex="9" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="subject" title="#xarML('Subject line in sent email')#" class="xar-form-label">
                    <xar:mlstring>Email Subject:</xar:mlstring>
                </label>
                <select id="subject" name="subject" tabindex="10">
                    <xar:if condition="$publication['subject'] eq 0">
                        <option name="id" value="0" selected="selected">Issue Title</option>
                    <xar:else />
                        <option name="id" value="0">Issue Title</option>
                    </xar:if>
                    <xar:if condition="$publication['subject'] eq 1">
                        <option name="id" value="1" selected="selected">Publication Title</option>
                    <xar:else />
                        <option name="id" value="1">Publication Title</option>
                    </xar:if>
                    <xar:if condition="$publication['subject'] eq 2">
                        <option name="id" value="2" selected="selected">Publication and Issue Title</option>
                    <xar:else />
                        <option name="id" value="2">Publication and Issue Title</option>
                    </xar:if>
                </select>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="logo" title="#xarML('example: http://my.site.com/logo.gif')#" class="xar-form-label">
                    <xar:mlstring>Logo:</xar:mlstring>
                </label>
                <input type="text" name="logo" id="logo" value="#$publication['logo']#" size="50" maxlength="255" tabindex="11" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="linkExpiration" title="#xarML('Default Number of Days before Link Expires')#" class="xar-form-label">
                    <xar:mlstring>Default Number of Days before Link Expires:</xar:mlstring>
                </label>
                <input type="text" name="linkExpiration" id="linkExpiration" value="#$publication['linkExpiration']#" size="4" maxlength="4" tabindex="12" />
                &nbsp;<xar:mlstring>(0 = link never expires)</xar:mlstring>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="linkRegistration" title="#xarML('Text for Link Registration')#" class="xar-form-label">
                    <xar:mlstring>Text for Link Registration:</xar:mlstring>
                </label>
                <textarea id="linkRegistration" name="linkRegistration" rows="3" cols="50" tabindex="13">#xarVarPrepForDisplay($publication['linkRegistration'])#</textarea>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="private" title="#xarML('Private Publication')#" class="xar-form-label">
                    <xar:mlstring>Private Publication:</xar:mlstring>
                </label>
                <xar:if condition="$publication['private'] eq 1">
                    <input type="checkbox" id="private" name="private" value="1" checked="checked" tabindex="14" />
                <xar:else />
                    <input type="checkbox" id="private" name="private" value="1" tabindex="15" />
                </xar:if>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="disclaimerId" title="#xarML('Private Publication')#" class="xar-form-label">
                    <xar:mlstring>Disclaimer:</xar:mlstring>
                </label>
                <select id="disclaimerId" name="disclaimerId" tabindex="16">
                <option value="0">Choose Disclaimer</option>
                    <xar:loop name="$publication['disclaimers']">
                        <xar:if condition="$loop:item['id'] eq $publication['disclaimerId']">
                            <option name="id" value="#$loop:item['id']#" selected="selected">#$loop:item['title']#</option>
                        <xar:else />
                            <option name="id" value="#$loop:item['id']#">#$loop:item['title']#</option>
                        </xar:if>
                    </xar:loop>
                </select>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="editdisclaimer" title="#xarML('Private Publication')#" class="xar-form-label">
                    <xar:mlstring>Or edit the current disclaimer:</xar:mlstring>
                </label>
                <textarea id="editdisclaimer" name="editdisclaimer" rows="3" cols="50" tabindex="17">#xarVarPrepForDisplay($disclaimer['disclaimer'])#</textarea>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="description" title="#xarML('Shown on subscription page')#" class="xar-form-label">
                    <xar:mlstring>Description:</xar:mlstring>
                </label>
                <textarea id="description" name="description" rows="10" cols="50" tabindex="18">#xarVarPrepForDisplay($publication['description'])#</textarea>
            </div>
        </fieldset>
        <div class="xar-form-input-wrapper-after">
            <input type="submit" value="#xarML('Update publication')#"  tabindex="15" />
        </div>
    </form>
</div>
