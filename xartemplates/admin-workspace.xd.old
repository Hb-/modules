<script type="text/javascript" src="modules/xtasks/xartemplates/includes/spinner.js"></script>
<xar:set name="xtasks_objectid">xarModGetVar('xtasks','xtasks_objectid')</xar:set>
<xar:data-getitem name="$properties" module="xTasks" itemtype="1" itemid="$xtasks_objectid" />

<div class="xar-mod-head" style="height: 20px;"><span class="xar-mod-title" style="float: left;"><xar:mlstring>New Task</xar:mlstring></span><span style="float: right;"><a href="javascript: void twist('newtaskform');"><img src="modules/xtasks/xarimages/rotate.gif" border="0" id="spinnerimg_newtaskform"></a></span></div>
<div align="center" style="visibility:hidden;position:absolute;" id="newtaskform">

    <div class="xar-mod-body">
    <form method="post" action="&xar-modurl-xtasks-admin-create;">
    
    <input type="hidden" name="authid" value="#$authid#" />
    <xar:if condition="!isset($ownerid)"><xar:set name="ownerid">"0"</xar:set></xar:if>
    <input type="hidden" name="ownerid" value="#$ownerid#" />
    <input type="hidden" name="modid" value="#$modid#" />
    <input type="hidden" name="itemtype" value="#$itemtype#" />
    <input type="hidden" name="objectid" value="#$objectid#" />
    <xar:if condition="!isset($returnurl)">
        <xar:set name="returnurl">$_SERVER['HTTP_REFERER']</xar:set>
    </xar:if>
    <input type="hidden" name="returnurl" id="returnurl" value="#$returnurl#" />
    
    <table width="100%" border="0" cellspacing="0" cellpadding="2">
        <tr>
            <td><xar:data-label property="$properties['task_name']" /></td>
            <td><xar:data-input property="$properties['task_name']" name="task_name" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['private']" /></td>
            <td><xar:data-input property="$properties['private']" name="private" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['description']" /></td>
            <td><xar:data-input property="$properties['description']" name="description" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['status']" /></td>
            <td><xar:data-input property="$properties['status']" name="status" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['priority']" /></td>
            <td><xar:data-input property="$properties['priority']" name="priority" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['importance']" /></td>
            <td><xar:data-input property="$properties['importance']" name="importance" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['date_approved']" /></td>
            <td><xar:data-input property="$properties['date_approved']" name="date_approved" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['date_start_planned']" /></td>
            <td><xar:data-input property="$properties['date_start_planned']" name="date_start_planned" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['date_end_planned']" /></td>
            <td><xar:data-input property="$properties['date_end_planned']" name="date_end_planned" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['date_start_actual']" /></td>
            <td><xar:data-input property="$properties['date_start_actual']" name="date_start_actual" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['date_end_actual']" /></td>
            <td><xar:data-input property="$properties['date_end_actual']" name="date_end_actual" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['hours_planned']" /></td>
            <td><xar:data-input property="$properties['hours_planned']" name="hours_planned" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['hours_spent']" /></td>
            <td><xar:data-input property="$properties['hours_spent']" name="hours_spent" /></td>
        </tr>
        <tr>
            <td><xar:data-label property="$properties['hours_remaining']" /></td>
            <td><xar:data-input property="$properties['hours_remaining']" name="hours_remaining" /></td>
        </tr>
        <tr>
            <xar:set name="updatebtn"><xar:mlstring>Create Task</xar:mlstring></xar:set>
            <td colspan=2 align="center"><br /><input type="submit" name="submit" value="#$updatebtn#"></td>
        </tr>
    </table>
    
    <input type="hidden" name="authid" id="authid" value="#xarSecGenAuthKey('xtasks')#" />
    
    </form>
    </div>
</div>

<div class="xar-mod-head"><span class="xar-mod-title"><xar:mlstring>Task List</xar:mlstring></span></div>
<div class="xar-mod-body">
<div align="center">

<table border="0" cellpadding="2" cellspacing="1" class="xar-accent" style="width: 100%;">
    <tr>

        <th><xar:mlstring>Task Name</xar:mlstring></th>
        <th><xar:mlstring>Importance</xar:mlstring></th>
        <th><xar:mlstring>Priority</xar:mlstring></th>
        <th><xar:mlstring>Status</xar:mlstring></th>
        <th><xar:mlstring>Options</xar:mlstring></th>
    </tr>

    <xar:loop name="$items">
    <tr><td class="xar-norm">
            <xar:if condition="empty($loop:item['link'])">#$loop:item['task_name']#<xar:else /><a href="#$loop:item['link']#">#$loop:item['task_name']#</a></xar:if>
        </td>
        
        <xar:set name="importance">$loop->item['importance']</xar:set>
        <td class="xar-norm" style="text-align: center;"><xar:data-output property="$properties['importance']" value="$importance" /></td>
    
        <td class="xar-norm" style="text-align: center;">#$loop:item['priority']#</td>
    
        <td class="xar-norm" style="text-align: center;">#$loop:item['status']#</td>
    
        <td class="xar-norm" style="text-align: center;">[&nbsp;<xar:if condition="empty($loop:item['editurl'])"><xar:mlstring>Edit</xar:mlstring><xar:else /><a href="#$loop:item['editurl']#"><xar:mlstring>Edit</xar:mlstring></a></xar:if>&nbsp;|&nbsp;<xar:if condition="empty($loop:item['deleteurl'])"><xar:mlstring>Delete</xar:mlstring><xar:else /><a href="#$loop:item['deleteurl']#"><xar:mlstring>Delete</xar:mlstring></a></xar:if>&nbsp;]</td>
    
      </tr>

        <xar:set name="date_start_planned">$loop->item['date_start_planned']</xar:set>
        <xar:set name="date_start_actual">$loop->item['date_start_actual']</xar:set>
        <xar:set name="date_end_planned">$loop->item['date_end_planned']</xar:set>
        <xar:set name="date_end_actual">$loop->item['date_end_actual']</xar:set>
        
    <tr><td class="xar-norm" colspan="4" style="padding-left: 25px;">#$loop:item['description']#
        <xar:if condition="!empty($planned_start_date) or !empty($planned_end_date)">
        <br><xar:mlstring>Planned Timeframe:</xar:mlstring>
        <xar:if condition="!empty($planned_start_date)">
            <xar:mlstring> from </xar:mlstring><em><xar:data-output property="$properties['planned_start_date']" value="$planned_start_date" dateformat="%a, %d %B %Y" /></em>
        </xar:if>
        <xar:if condition="!empty($planned_end_date)">
            <xar:mlstring> thru </xar:mlstring><em><xar:data-output property="$properties['planned_end_date']" value="$planned_end_date" dateformat="%a, %d %B %Y" /></em>
        </xar:if>
    </xar:if>
    <xar:if condition="!empty($actual_start_date) or !empty($actual_end_date)">
        <br><xar:mlstring>Actual Timeframe:</xar:mlstring>
        <xar:if condition="!empty($actual_start_date)">
            <xar:mlstring> from </xar:mlstring><em><xar:data-output property="$properties['actual_start_date']" value="$actual_start_date" dateformat="%a, %d %B %Y" /></em>
        </xar:if>
        <xar:if condition="!empty($planned_end_date)">
            <xar:mlstring> thru </xar:mlstring><em><xar:data-output property="$properties['actual_end_date']" value="$actual_end_date" dateformat="%a, %d %B %Y" /></em>
        </xar:if>
    </xar:if>
    </td></tr>

    </xar:loop>



</table>

<br />

</div>
</div>
<div class="xar-mod-foot" style="text-align: center;">
#$pager#
</div>
<div style="text-align: center;"><em>Task importance is a measure of macro-level priority.<br>Actual priority is a measure of immediate urgency.</em></div>