<div class="ievents-calendar-smallmonth">
    <xar:if condition="$nextprevmonth">
      <xar:template file="cal-pager" subdata="array('group'=&gt;$group,'cal_links'=&gt;$cal_links,'cal_links_labels'=&gt;$cal_links_labels,'url_params'=&gt;$url_params)" />
    </xar:if>
    <xar:if condition="$showtitle">
    	<h4>
	    	#$prevlink# 
		    <xar:if condition="$linkmonth">
    			<a href="#xarModURL('ievents','user','view',array('cid' => $cid, 'startdate' => $startdate, 'enddate' => $enddate, 'format' => 'cal', 'group' => 'month'))#">#$month# #$year#</a> 
	    	<xar:else />
    			#$month# #$year# 
    		</xar:if>
    		#$nextlink#
    	</h4>
    </xar:if>
	<table class="ievents-calendar-smallmonth">
		<tr>
			<xar:for start="$i = 0" test="$i lt 7" iter="$i++">
			    <th>#$daysofweek.$i#</th>
			</xar:for>
		</tr>
        <xar:if condition="$startday ne 0">
            <tr>
        </xar:if>
			<xar:for start="$i = 1" test="$i le $days" iter="$i++">
			    <xar:if condition="$startday eq 0">
			        <tr>
			    </xar:if>

				<xar:set name="date">mktime(0, 0, 0, $m, $i, $y)</xar:set>
				<xar:set name="classes">''</xar:set>

			    <xar:if condition="(date('w', $date) eq 0) or (date('w', $date) eq 6)">
			    	<xar:set name="classes">$classes . (!empty($classes) ? ' ' : '') . 'ievents-weekend'</xar:set>
			    </xar:if>

			    <xar:if condition="$i eq $selected_day">
			    	<xar:set name="classes">$classes . (!empty($classes) ? ' ' : ''). 'ievents-selected-day'</xar:set>
			    </xar:if>

			    <xar:if condition="$i eq $today">
			    	<xar:set name="classes">$classes . (!empty($classes) ? ' ' : '') . 'ievents-today'</xar:set>
			    </xar:if>

			    <xar:if condition="$i eq 1 and $startday gt 0">
			    	<td colspan="#$startday#" class="ievents-spacer">&nbsp;</td>
			    </xar:if>

			    <xar:if condition="!empty($classes)">
			    	<td class="#$classes#"><span>#$cal:getEvents(mktime(0, 0, 0, $m, $i, $y), "smallMonth")#</span></td>
			    <xar:else />
			    	<td><span>#$cal:getEvents(mktime(0, 0, 0, $m, $i, $y), "smallMonth")#</span></td>
			    </xar:if>

			    <xar:set name="startday">$startday + 1</xar:set>

			    <xar:if condition="$startday eq 7">
			        </tr>
			        <xar:set name="startday">0</xar:set>
			    </xar:if>
			</xar:for>

		<xar:if condition="$startday gt 0">
			<xar:set name="offset">7 - $startday</xar:set>
		    <td colspan="#$offset#" class="ievents-spacer">&nbsp;</td>
		</xar:if>

	</table>
    <xar:if condition="$nextprevday">
        <xar:template file="cal-pager" subdata="array('group'=&gt;'day','cal_links'=&gt;$cal_links,'cal_links_labels'=&gt;$cal_links_labels,'url_params'=&gt;$url_params)" />
    </xar:if>
</div>
