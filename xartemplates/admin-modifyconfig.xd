<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>Helpdesk Modify Configuration</xar:mlstring>
    </span>
</div>
<div class="xar-mod-body">

    <xar:template file="admin-menu" />

    <form action="&xar-modurl-helpdesk-admin-updateconfig;" method="post">
    <fieldset>
        <legend><xar:mlstring>Global Settings</xar:mlstring></legend>

        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Module Website</xar:mlstring></label>
            <a href="http://www.abrasiontechnology.com/">Abrasion Technology</a>
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Enforce Form Authorization</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'EnforceAuthKey')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="enforceauthkey" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Allow Users to check status</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'User can check status')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="usercancheckstatus" value="1" #$checked# />
        </div>
        <xar:comment>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Allow Techs to see ALL tickets</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'Techs see all tickets')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="techsseealltickets" value="1" #$checked# />
        </div>
        </xar:comment>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Enable Images</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'Enable Images')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="enableimages" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Enable HyperLinks in Stats</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'EnableMyStatsHyperLink')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="enablemystatshyperlink" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Representative Group</xar:mlstring></label>
            <xar:set name="tech_group">xarModGetVar('helpdesk', 'tech_group')</xar:set>
            <xar:data-input name="tech_group" type="grouplist" value="$tech_group"/>
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Default Open Status</xar:mlstring></label>
            <xar:set name="default_open">xarModGetVar('helpdesk', 'default_open_status')</xar:set>
            <xar:data-input name="default_open_status" type="dropdown" validation="$statuses" value="$default_open" />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Open Statuses</xar:mlstring></label>
            <xar:set name="open">@unserialize(xarModGetVar('helpdesk', 'open_statuses'))</xar:set>
            <xar:data-input name="open_statuses" type="multiselect" validation="$statuses" value="$open" />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Default Resolved Status</xar:mlstring></label>
            <xar:set name="default_resolved">xarModGetVar('helpdesk', 'default_resolved_status')</xar:set>
            <xar:data-input name="default_resolved_status" type="dropdown" validation="$statuses" value="$default_resolved" />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Resolved Statuses</xar:mlstring></label>
            <xar:set name="resolved">@unserialize(xarModGetVar('helpdesk', 'resolved_statuses'))</xar:set>
            <xar:data-input name="resolved_statuses" type="multiselect" validation="$statuses" value="$resolved"/>
        </div>

    </fieldset>

    <fieldset>
        <legend><xar:mlstring>New Ticket Options</xar:mlstring></legend>

        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Allow Anonymous to submit tickets</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'Anonymous can Submit')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="anonymouscansubmit" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Allow Users to submit tickets</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'User can Submit')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="usercansubmit" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Allow Users to change ticket status on submit</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'AllowStatusChangeOnSubmit')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="allowstatuschangeonsubmit" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Allow closing tickets on submit</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'AllowCloseOnSubmit')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="allowcloseonsubmit" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Default to Logged in Tech ID for Opened By</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'OpenedByDefaultToLoggedIn')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="openedbydefaulttologgedin" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Default the AssignedTo field to the currently logged in user</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'AssignedToDefaultToLoggedIn')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="assignedtodefaulttologgedin" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Allow Usage of Domain Names</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'AllowDomainName')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="allowdomainname" value="1" #$checked# />
        </div>

    </fieldset>

    <fieldset>
        <legend><xar:mlstring>View Ticket Results Settings</xar:mlstring></legend>

        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Rows per page(0 for all)</xar:mlstring></label>
            <xar:set name="$value">xarModGetVar('helpdesk', 'Default rows per page')</xar:set>
            <input type="text" name="rowsperpage" value="#$value#" />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Max result page count (ie: 1 2 3 4 )</xar:mlstring></label>
            <xar:set name="$value">xarModGetVar('helpdesk', 'Page Count Limit')</xar:set>
            <input type="text" name="pagecountlimit" value="#$value#" />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Show Status in view Ticket List</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'ShowStatusInSummary')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="showstatusinsummary" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Show Priority in view Ticket List</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'ShowPriorityInSummary')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="showpriorityinsummary" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Show Date Entered in view Ticket List</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'ShowDateEnteredInSummary')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="showdateenteredinsummary" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Show Last Modified in view Ticket List</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'ShowLastModifiedInSummary')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="showlastmodifiedinsummary" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Show Opened By in Ticket List</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'ShowOpenedByInSummary')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="showopenbyinsummary" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Show Assigned To in Ticket List</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'ShowAssignedToInSummary')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="showassignedtoinsummary" value="1" #$checked# />
        </div>
        <div class="xar-form-input-wrapper">
            <label class="xar-form-label"><xar:mlstring>Show Closed By To in Ticket List</xar:mlstring></label>
            <xar:set name="$checked">xarModGetVar('helpdesk', 'ShowClosedByInSummary')?'checked="checked"':''</xar:set>
            <input type="checkbox" name="showclosedbyinsummary" value="1" #$checked# />
        </div>

    </fieldset>

    <xar:foreach in="$hooks" value="$hook">
        <xar:var name="hook" />
    </xar:foreach>

    <fieldset class="">
        <legend>Actions</legend>
        <div class="xar-form-input-wrapper-after">
            <input type="hidden" name="authid" id="authid" value="#$authid#" />
            <input type="submit" name="submit" value="#xarML('Update Config')#" />
        </div>
    </fieldset>

    </form>

</div>
