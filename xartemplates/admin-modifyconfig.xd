<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<xar:style />
<xar:base-include-javascript module="base" filename="formcheck.js" />
<script type="text/javascript">
<!--
    // Enter name of mandatory fields
    var base_fieldRequired = Array("mailserver, mailserverlogin, mailserverpass, mailserverport");
    // Enter field description to appear in the dialog box
    var base_fieldDescription = Array("Mailserver, Login, Password, Port");
//-->
</script>
<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>
            POP3 Gateway Administration
        </xar:mlstring>
    </span>
</div>
<div class="xar-mod-body">
    <h2>
        <xar:mlstring>
            Modify Configuration
        </xar:mlstring>
    </h2>
    <form action="&xar-modurl-pop3gateway-admin-updateconfig;" method="post" enctype="application/x-www-form-urlencoded">
        <fieldset>
            <legend>
                <strong>
                    <xar:mlstring>
                        Mail Settings
                    </xar:mlstring>
                </strong>
            </legend>
            <input type="hidden" name="authid" id="authid" value="#$authid#" />
            <div class="xar-form-input-wrapper">
                <label for="mailserver" class="xar-form-label required">
                    <span class="help" title="#xarML('Enter the server that the gateway will check to post')#">
                        <xar:mlstring>
                            Mail Server
                        </xar:mlstring>
                    </span>
                </label>
                <input type="text" name="mailserver" id="mailserver" value="#xarModGetVar('pop3gateway', 'mailserver', 1)#" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="mailserverlogin" class="xar-form-label required">
                    <span class="help" title="#xarML('Enter the username for the mailserver')#">
                        <xar:mlstring>
                            Mail Server Login
                        </xar:mlstring>
                    </span>
                </label>
                <input type="text" name="mailserverlogin" id="mailserverlogin" value="#xarModGetVar('pop3gateway', 'mailserverlogin', 1)#" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="mailserverpass" class="xar-form-label required">
                    <span class="help" title="#xarML('Enter the password for the mailserver')#">
                        <xar:mlstring>
                            Mail Server Password
                        </xar:mlstring>
                    </span>
                </label>
                <input type="password" name="mailserverpass" id="mailserverpass" value="#xarModGetVar('pop3gateway', 'mailserverpass', 1)#" />
            </div>
            <div class="xar-form-input-wrapper">
                <label for="mailserverport" class="xar-form-label required">
                    <span class="help" title="#xarML('Enter the port for the mailserver')#">
                        <xar:mlstring>
                            Mail Server Port
                        </xar:mlstring>
                    </span>
                </label>
                <input type="text" name="mailserverport" id="mailserverport" value="#xarModGetVar('pop3gateway', 'mailserverport', 1)#" size="5" maxlength="4" />
            </div>
        </fieldset>
        <fieldset class="formelements xar-norm">
            <legend>
                <strong>
                    <xar:mlstring>
                        Articles Settings
                    </xar:mlstring>
                </strong>
            </legend>
            <div class="xar-form-input-wrapper">
                <label for="importpubtype" class="xar-form-label">
                    <span class="help" title="#xarML('Choose a publication type for import.')#">
                        <xar:mlstring>
                            Import to Publication Type
                        </xar:mlstring>
                    </span>
                </label>
                <select name="importpubtype" id="importpubtype">
                <xar:foreach in="$pubtypes" key="$ptid" value="$pubtype">
                    <xar:if condition="!empty($importpubtype) and $importpubtype eq $ptid">
                        <option value="#$ptid#" selected="selected">#$pubtype['descr']#</option>
                    <xar:else/>
                        <option value="#$ptid#">#$pubtype['descr']#</option>
                    </xar:if>
                </xar:foreach>
                </select>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="defaultstatus" class="xar-form-label">
                    <span class="help" title="#xarML('Choose the default status for incoming articles.')#">
                        <xar:mlstring>
                            Default Status
                        </xar:mlstring>
                    </span>
                </label>
                <select name="defaultstatus" id="defaultstatus">
                    <xar:if condition="xarModGetVar('pop3gateway', 'defaultstatus') eq 0">   
                        <option value="0" selected="selected">Submitted</option>
                        <option value="2">Approved</option>
                        <option value="3">Front Page</option>
                    <xar:elseif condition="xarModGetVar('pop3gateway', 'defaultstatus') eq 2" />
                        <option value="2" selected="selected">Approved</option>
                        <option value="0">Submitted</option>
                        <option value="3">Front Page</option>
                    <xar:elseif condition="xarModGetVar('pop3gateway', 'defaultstatus') eq 3" />
                        <option value="3" selected="selected">Front Page</option>
                        <option value="2">Approved</option>
                        <option value="0">Submitted</option>
                    <xar:else />
                        <option value="0" selected="selected">Submitted</option>
                        <option value="2">Approved</option>
                        <option value="3">Front Page</option>
                    </xar:if>
                </select>
            </div>
            <div class="xar-form-input-wrapper">
                <label for="DeleteMailAfter" class="xar-form-label" title="#xarML('Delete the mail after retrieval from the server')#">
                    <xar:mlstring>Delete mail after retrieval</xar:mlstring>:
                </label>
                <xar:if condition="xarModGetVar('pop3gateway', 'DeleteMailAfter')">
                    <input type="checkbox" name="DeleteMailAfter" id="DeleteMailAfter" value="1" checked="checked" />
                <xar:else />
                   <input type="checkbox" name="DeleteMailAfter" id="DeleteMailAfter" value="1" />
                </xar:if>
            </div>
        </fieldset>
        <div class="xar-form-input-wrapper-after">
           <input type="submit" value="#xarML('Submit')#" />
           <input type="reset" value="#xarML('Reset')#" />
        </div>
    </form>
</div>