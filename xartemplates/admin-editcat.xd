<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<xar:if condition="xarTplAddStyleLink('categories', 'forms')"></xar:if>
<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>
            Categories Administration
        </xar:mlstring>
    </span>
</div>
<div class="xar-mod-body">
    <h2>
        <xar:if condition="$func eq 'modify'">
            <xar:mlstring>
                Modify Category
            </xar:mlstring>
        <xar:else />
            <xar:mlstring>
                Create New Category
            </xar:mlstring>
        </xar:if>
    </h2>
    <form class="xar-formwidget" action="#xarModURL('categories','admin','updatecat',array())#" method="post"  enctype="application/x-www-form-urlencoded">
        <fieldset class="formelements xar-norm">
            <legend>
                <strong>
                    <xar:if condition="$func eq 'modify'">
                        <xar:mlstring>
                            Modify Category
                        </xar:mlstring>
                    <xar:else />
                        <xar:mlstring>
                            Create New Category
                        </xar:mlstring>
                    </xar:if>
                </strong>
            </legend>
            <input type="hidden" name="authid" id="authid" value="#xarSecGenAuthKey()#" />
            <xar:for iter="$i++" start="$i=0" test="$i lt $repeat">
            <fieldset class="formelements xar-norm">
                <legend>
                    <strong>
                        <xar:mlstring>
                            Category
                        </xar:mlstring>
                        #$i+1#
                    </strong>
                </legend>
                <input type="hidden" name="cids[]" id="cids[]" value="#$cid#" />
                <p class="param">
                    <label for="name[#$cid#]" class="required">
                        <span class="help" title="#xarML('The name of the category.')#">
                            <xar:mlstring>
                                Name
                            </xar:mlstring>
                        </span>
                    </label>
                    <input type="text" name="name[#$cid#]" id="name[#$cid#]" value="#$category['name']#" size="32" maxlength="64" />
                </p>
                <p class="param">
                    <label for="description[#$cid#]">
                        <span class="help" title="#xarML('The description of the category.')#">
                            <xar:mlstring>
                                Description
                            </xar:mlstring>
                        </span>
                    </label>
                    <textarea name="description[#$cid#]" id="description[#$cid#]" cols="40" rows="3" maxlength="255">#$category['description']#</textarea>
                </p>
                <xar:template file="localization" type="module" />
                <p class="param">
                    <label for="image[#$cid#]">
                        <span class="help" title="#xarML('In modules/categories/xarimages.  Theme-dependent versions can then be placed in themes/[theme name]/modules/categories/images')#">
                            <xar:mlstring>
                                Optional Image
                            </xar:mlstring>
                        </span>
                    </label>
                    <select name="image[#$cid#]" id="image[#$cid#]">
                        <xar:loop name="$imageoptions">
                            <xar:if condition="!empty($category['image']) and $category['image'] eq $loop:item['name']">
                                <option selected="selected">#$loop:item['name']#</option>
                            <xar:else />
                                <option>#$loop:item['name']#</option>
                            </xar:if>
                        </xar:loop>
                    </select>
                </p>
                <xar:if condition="!empty($hooks)">
                    <fieldset class="formelements xar-norm">
                        <legend>
                            <strong>
                                <xar:mlstring>
                                    Hooks
                                </xar:mlstring>
                            </strong>
                        </legend>
                        <xar:if condition="!empty($hooks)">
                            <xar:foreach in="$hooks" key="$module" value="$output">
                                #$output#
                            </xar:foreach>
                        </xar:if>
                    </fieldset>
                </xar:if>
            </xar:for>
            <p class="param">
                <xar:if condition="$func eq 'modify'">
                    <input type="submit" value="#$modifylabel#" />
                    <input type="hidden" name="creating" id="creating" value="false"/>
                <xar:else />
                    <input type="submit" value="#$addlabel#"  />
                    <input type="hidden" name="creating" id="creating" value="true"/>
                </xar:if>
                <input type="reset" value="#xarML('Reset')#" />
            </p>
        </fieldset>
        <fieldset class="formelements xar-norm">
            <legend>
                <strong>
                    <xar:mlstring>
                        Batch Processing
                    </xar:mlstring>
                </strong>
            </legend>
            <p class="param">
                <label for="repeat">
                    <span class="help" title="#xarML('Create Categories in a Batch.')#">
                        <xar:mlstring>
                            Create in a batch
                        </xar:mlstring>
                    </span>
                </label>
                <input type="text" name="repeat" id="repeat" value="#$repeat#" />
            </p>
            <p class="param">
                <input type="submit" name="reassign" id="reassign" size="3" value="#$reassignlabel#" />
                <input type="reset" value="#xarML('Reset')#" />
            </p>
        </fieldset>
    </form>
</div>