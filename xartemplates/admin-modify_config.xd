<xar:template file="admin-menu" type="module"/>

<h3><xar:mlstring>Modify configuration</xar:mlstring></h3>
<table>
    <form action="&xar-modurl-reports-admin-update_config;" method="post">
        <tr>
            <input type="hidden" name="authid" value="#$authid#"/>
            <td><label for="config_replocation"><xar:mlstring>Report location</xar:mlstring></label></td>
            <td><input type="text" size="70" name="config_replocation" id="config_replocation" value="#$rep_location#"/></td>
        </tr>
        <tr>
            <td><label for="config_imglocation"><xar:mlstring>Images location</xar:mlstring></label></td>
            <td><input type="text" size="70" name="config_imglocation" id="config_imglocation" value="#$img_location#"/></td>
        </tr>
        <tr>
            <td><label for="config_pdfbackend"><xar:mlstring>PDF backend processor</xar:mlstring></label></td>
            <td>
              <select name="config_pdfbackend" id="config_pdfbackend">
                <xar:loop name="$backends">
                  <xar:if condition="$loop:item.available">
                      <xar:if condition="$selectedbackend eq $loop:item['id']">
                        <option selected="selected" value="#$loop:item['id']#">#$loop:item['name']#</option>
                      <xar:else/>
                        <option value="#$loop:item['id']#">#$loop:item['name']#</option>
                      </xar:if>
                  <xar:else/>
                      <option disabled="disabled" value="#$loop:item.id#">#$loop:item.name# <xar:mlstring>(unavailable)</xar:mlstring></option>
                  </xar:if>
                </xar:loop>
              </select>
            </td>
        </tr>
        <tr>
            <td><label for="config_defaultoutput"><xar:mlstring>Default output format</xar:mlstring></label></td>
            <td>
                <select id="config_defaultoutput" name="config_defaultoutput">
                    <xar:if condition="$format == 'html'">
                        <option selected="selected" value="html"><xar:mlstring>HTML-output</xar:mlstring></option>
                    <xar:else/>
                        <option value="html"><xar:mlstring>HTML-output</xar:mlstring></option>
                    </xar:if>
                    <xar:if condition="$format == 'pdf'">
                        <option selected="selected" value="pdf"><xar:mlstring>PDF-output</xar:mlstring></option>
                    <xar:else/>
                        <option value="pdf"><xar:mlstring>PDF-output</xar:mlstring></option>
                    </xar:if>
                </select>
            </td>
        </tr>
        <tr>
            <td><label for="config_foplocation"><xar:mlstring>Path to fop</xar:mlstring></label></td>
            <td><input type="text" size="70" name="config_foplocation" id="config_foplocation" value="#$fop_location#"/></td>
        </tr>
        <tr>
            <td><label for="config_itemsperpage"><xar:mlstring>Items per page (search results)</xar:mlstring></label></td>
            <td><input type="text" size="3" name="config_itemsperpage" id="config_itemsperpage" value="#$itemsperpage#"/></td>
        </tr>
        <tr>
            <xar:set name="$buttonlabel"><xar:mlstring>Update config</xar:mlstring></xar:set>
            <td><input type="submit" value="#$buttonlabel#"/></td>
            <td>&nbsp;</td>
        </tr>
    </form>
</table>