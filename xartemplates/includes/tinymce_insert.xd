<xar:comment>Template for xartinycme wysiwyg editor</xar:comment>


<xar:if condition="xarModGetVar('tinymce','tinymode') ne 'manual'">
    <xar:comment>Include the static JavaScript</xar:comment>
    <xar:base-include-javascript position="head" module="tinymce" filename="tinymce/jscripts/tiny_mce/tiny_mce.js" />

    <xar:comment>Include the dynamic JavaScript, if not already included.</xar:comment>
    <xar:set name="tinyloaded">xarTplGetJavaScript('head', 'tinymce')</xar:set>
    <xar:if condition="empty($tinyloaded)">
        <xar:set name="jsstring">xarModGetVar('tinymce','jstext')</xar:set>
        <xar:set name="dynajs">xarTplAddJavaScript('head', 'code', 'tinyMCE.init({'.$jsstring.'});', 'tinymce')</xar:set>
    </xar:if>
<xar:else />
    <xar:comment> Let's allow manual override - override the template and replace the jsstring with your own variables as required </xar:comment>
    
    <xar:set name="jsstring">xarModGetVar('tinymce','jstext')</xar:set>
    <xar:set name="currentmod">xarModGetName()</xar:set>
    <xar:set name="serverbaseurl">xarServerGetBaseURL()</xar:set>
    <!-- XarTinyMCE -->
    <script type="text/javascript" src="#$serverbaseurl#modules/tinymce/xartemplates/includes/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
    <script type="text/javascript">
        tinyMCE.init({
        #$jsstring#
        });
    </script>
    <!-- /XarTinyMCE -->
</xar:if>
