<?xml version="1.0" encoding="utf-8"?>
<xar:template xmlns:xar="http://xaraya.com/2004/blocklayout">
    <xar:for start="$i=1" test="$i le $rows" iter="$i++">
        <div class="xar-form-input-wrapper">
            <label for="#$name#_city" class="xar-form-label">
            <xar:set name="fieldname">'line_'. $i</xar:set>
                <xar:if condition="!empty($labels[$fieldname])">
                    #$labels[$fieldname]#
                <xar:else />
                    Street
                </xar:if>
            </label>
            <input type="text" name="#$name#_line_#$i#" id="#$id#_line_#$i#" value="#$value[$fieldname]#"/>
        </div>
    </xar:for>
    <div class="xar-form-input-wrapper">
        <label for="#$name#_city" class="xar-form-label">
            <xar:if condition="!empty($labels['city'])">
                #$labels['city']#
            <xar:else />
                City
            </xar:if>
        </label>
        <input type="text" name="#$name#_city" id="#$id#_city" value="#$value['city']#"/>
    </div>
    <xar:if condition="empty($show_province)">
        <div class="xar-form-input-wrapper">
            <label for="#$name#_province" class="xar-form-label">
                <xar:if condition="!empty($labels['state'])">
                    #$labels['state']#
                <xar:else />
                    State
                </xar:if>
            </label>
            <xar:var name="firstline">Choose a state</xar:var>
            <xar:set name="firstline">"0,$firstline"</xar:set>
            <xar:set name="provincename">$name . '_province'</xar:set>
            <xar:data-input type="statelisting" name="$provincename" value="$value['province']" firstline="$firstline"/>
        </div>
    </xar:if>
    <xar:if condition="empty($show_postal_code)">
        <div class="xar-form-input-wrapper">
            <label for="#$name#_postal_code" class="xar-form-label">
                <xar:if condition="!empty($labels['postal_code'])">
                    #$labels['postal_code']#
                <xar:else />
                    Postal Code
                </xar:if>
            </label>
            <input type="text" name="#$name#_postal_code" id="#$id#_postal_code" value="#$value['postal_code']#"/>
        </div>
    </xar:if>
    <xar:if condition="empty($show_country)">
        <div class="xar-form-input-wrapper">
            <label for="#$name#_country" class="xar-form-label">
                <xar:if condition="!empty($labels['country'])">
                    #$labels['country']#
                <xar:else />
                    Country
                </xar:if>
            </label>
            <xar:var name="firstline">Choose a country</xar:var>
            <xar:set name="firstline">"0,$firstline"</xar:set>
            <xar:set name="countryname">$name . '_country'</xar:set>
            <xar:data-input type="countrylisting" name="$countryname" value="$value['country']" firstline="$firstline"/>
        </div>
    </xar:if>

    <xar:template file="dataproperty_additions" module="base"/>
</xar:template>