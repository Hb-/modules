<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<xar:style scope="module" module="dossier" file="default" />

<xar:set name="mymemberid">xarModGetUserVar('xproject', 'mymemberid')</xar:set>

<xar:style scope="module" module="base" file="navtabs" />

<xar:set name="currentmodname">xarModGetName()</xar:set>

<xar:set name="request">xarRequestGetInfo()</xar:set>
<xar:set name="activetab">#$request.2#</xar:set>
<xar:set name="activetype">#$request.1#</xar:set>
<xar:comment>This menu is used by all users not just admin. Let us
    hide the menu unless they have edit level privs.
    The New tab is redundant if you only have submit level privs.
</xar:comment>

<div class="xar-mod-head"><span class="xar-mod-title">#xarModGetVar('dossier', 'displaytitle')#</span></div>

<div class="xar-mod-body">
    <dl class="xar-tabs">
        <dt class="help" title="#xarML('Choose an action to perform')#">
          <xar:mlstring>Actions:</xar:mlstring>
        </dt>

        <xar:sec id="menu_dashboard" mask="TeamDossierAccess" catch="false">
          <xar:if condition="$activetab eq 'dashboard'">
            <xar:set name="tabclass">'active'</xar:set>
          <xar:else />
             <xar:set name="tabclass">''</xar:set>
          </xar:if>
          <dd class="#$tabclass#">
            <a href="#xarModURL('dossier','user','dashboard')#" title="#xarML('Dossier CRM Dashboard')#">
                <xar:mlstring>Dashboard</xar:mlstring>
            </a>
          </dd>
        </xar:sec>

        <xar:sec id="menu_newcontact" mask="TeamDossierAccess" catch="false">
          <xar:if condition="$activetab eq 'new'">
            <xar:set name="tabclass">'active'</xar:set>
          <xar:else />
             <xar:set name="tabclass">''</xar:set>
          </xar:if>
          <dd class="#$tabclass#">
            <a href="#xarModURL('dossier','admin','new')#" title="#xarML('Add a new Contact')#">
                <xar:mlstring>New Contact</xar:mlstring>
            </a>
          </dd>
        </xar:sec>

        <xar:if condition="$activetab eq 'view'">
            <xar:set name="tabclass">'active'</xar:set>
        <xar:else />
             <xar:set name="tabclass">''</xar:set>
        </xar:if>
        <dd class="#$tabclass#">
          <a href="#xarModURL('dossier','admin','view')#" title="#xarML('View contact list entries')#">
                <xar:mlstring>Contact List</xar:mlstring>
          </a>
        </dd>

        <xar:sec id="menu_config" mask="AdminDossier" catch="false">
          <xar:if condition="$activetab eq 'modifyconfig'">
            <xar:set name="tabclass">'active'</xar:set>
          <xar:else />
             <xar:set name="tabclass">''</xar:set>
          </xar:if>
          <dd class="#$tabclass#">
            <a href="#xarModURL('dossier','admin','modifyconfig')#">
                <xar:mlstring>Modify Config</xar:mlstring>
            </a>
          </dd>
        </xar:sec>

        <xar:if condition="$activetab eq 'main' or $activetab eq 'overview'">
            <xar:set name="tabclass">'active'</xar:set>
        <xar:else />
             <xar:set name="tabclass">''</xar:set>
        </xar:if>
        <dd class="#$tabclass#">
          <a href="#xarModURL('dossier','admin','main')#">
            <xar:mlstring>Overview</xar:mlstring></strong>
          </a>
        </dd>
    </dl>
</div>

<div class="xar-mod-body">
    <xar:set name="statusmsg">xarSessionGetVar('statusmsg')</xar:set>
    <xar:if condition="!empty($statusmsg)">
        <div style="border: 2px solid black; background-color: red; color: black; padding: 2px; text-align: center;">
            #$statusmsg#
        </div>
        <xar:set name="dummy">xarSessionSetVar('statusmsg',"")</xar:set>
    </xar:if>
</div>
