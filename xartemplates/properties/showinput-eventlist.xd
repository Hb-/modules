<table id="cal-calendar">
    <tr>
        <xar:foreach in="$fields" key="$column" value="$field">
            <xar:if condition="$column eq 'id'">
                <xar:continue />
            </xar:if>
            <th>
                <xar:set name="url">xarServerGetCurrentURL(array('order' => $column))</xar:set>
                <a href="#$url#" alt="Click to order by this field" title="Order by #$field#">
                    #$field#
                </a>
            </th>
        </xar:foreach>
    </tr>
    <xar:loop name="$events">
        <xar:if condition="(($loop:index + 1) % 2)">
            <xar:set name="item_class">'xar-norm'</xar:set>
        <xar:else/>
            <xar:set name="item_class">'xar-alt'</xar:set>
        </xar:if>
        <tr class="#$item_class#">
            <xar:foreach in="$fields" key="$column" value="$field">
                <xar:if condition="$column eq 'id'">
                    <xar:continue />
                </xar:if>
                <td>
                    <xar:set name="value">$loop->item[$column]</xar:set>
                    <xar:if condition="$column eq $keyfieldalias">
                        <a href="#xarModURL($localmodule,'user','display',array('itemid' =>$loop->item['id']))#">
                            <xar:data-output property="$properties[$column]" value="$value" />
                        </a>
                    <xar:else />
                        <xar:data-output property="$properties[$column]" value="$value" />
                    </xar:if>
                </td>
            </xar:foreach>
        </tr>
    </xar:loop>
</table>
