<!--- License: GPL http://www.gnu.org/copyleft/gpl.html --->

<!--- This template displays all the Topics in a forum.
      You can easily add icons to this template.

      Icons that are used for actions such as New Post, Edit, Delete and so on.
      These images must exist with names indicated in your xarbb/xarimages/
      folder or theme equivalent.

      You can replace the <xar:mlstring>Action text</xar:mlstring> areas with corresponding
      icon variables as #$nameofvar# to display the named gif file -

         #$newtopic#   newpost.gif        New Topic
         #$newreply#   replypost.gif'     New reply
         #$edit#       edit.gif           Edit
         #$delete#     delete.gif         Delete
         #$profile#    infoicon.gif       User Profile or account if logged in
         #$subscribe#  subscribe.gif      Subscribe to a forum  - not implemented
      
      If you have images called folder.gif, hot_folder.gif, and hot_red_folder.gif  
      you can uncomment the lines in two places to display     #$loop:item['folder']#
      which will display these icons dependent on number of topics - and your config settings.
--->

<table border="0" cellpadding="3" cellspacing="0" width="100%">
  <tr>
    <td colspan="2">
	<xar:categories-navigation layout="trails" showchildren="1" module="xarbb" itemtype="1" func="main" catid="$catid" />
    </td>
  </tr>
  <tr>
    <td class="xar-accent">
      <b><xar:mlstring>Forum Title</xar:mlstring>: #$fname#</b>
    </td>
	<xar:sec mask="PostxarBB" catch="false">
    <td class="xar-accent" align="right">
      <a href="#xarModURL('xarbb', 'user', 'newtopic', array('fid' => $fid))#"><xar:mlstring>Post a New Topic</xar:mlstring></a>
    </td>
	</xar:sec>
  </tr>
  <tr>
    <td colspan="2"><xar:mlstring>Logged in as</xar:mlstring>: #xarUserGetVar('name')# / 
	<xar:if condition="xarUserIsLoggedIn()">
		<a href="#xarModUrl('roles', 'user', 'account')#"><xar:mlstring>Your Account</xar:mlstring></a>
	<xar:else />
		<a href="#xarModUrl('roles', 'user', 'account')#"><xar:mlstring>Log In | Register</xar:mlstring></a>
	</xar:if>
    </td>
  </tr>
</table>
<br />
<xar:if condition="!empty($pager)">
<table border="1" cellpadding="3" cellspacing="0" width="100%" style="border-color: #000000; border-collapse: collapse;">
  <tr>
    <td class="xar-accent">
      <table border="0" cellpadding="4" cellspacing="0" width="100%">
        <tr>
          <td width="45%"><b>#$pager#</b></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<br />
</xar:if>

<table border="1" cellpadding="3" cellspacing="0" width="100%" style="border-color: #000000; border-collapse: collapse;">
  <tr>
    <td align="center" colspan="3" class="xar-accent"><b><xar:mlstring>Topic</xar:mlstring></b></td>
    <td width="100" align="center" class="xar-accent"><b><xar:mlstring>Last Poster</xar:mlstring></b></td>
    <td width="75" align="center" class="xar-accent"><b><xar:mlstring>Replies</xar:mlstring></b></td>
    <td width="75" align="center" class="xar-accent"><b><xar:mlstring>Views</xar:mlstring></b></td>
    <td width="130" align="center" class="xar-accent"><b><xar:mlstring>Last Post</xar:mlstring></b></td>
<xar:sec mask="EditxarBB" catch="false">
    <td width="130" align="center" class="xar-accent"><b><xar:mlstring>Options</xar:mlstring></b></td>
</xar:sec>
  </tr>
<xar:loop name="$items">
<xar:if condition="(($loop:index + 1) % 2)">
  <tr>
    <td width="21" class="xar-accent">&nbsp;</td>
    <td width="21">
    <!--- Uncomment to display folder icon, hot topic, and hottest topic icons
    #$loop:item['folder']#
    --->
    &nbsp;
    </td>
    <td><a href="#xarModURL('xarbb', 'user', 'viewtopic', array('tid' => $loop:item['tid']))#">#$loop:item['ttitle']#</a></td>
    <td width="100" align="center"><a href="#xarModUrl('roles', 'user', 'display', array('uid' => $loop:item['authorid']))#">#$loop:item['replyname']#</a></td>
    <td width="75" align="center">#$loop:item['comments']#</td>
    <td width="75" align="center">#$loop:item['hitcount']#</td>
    <td width="130" align="right" valign="top">#$loop:item['ttime']#</td>
	<xar:sec mask="EditxarBB" catch="false">
    <td width="130" align="right" valign="top">
    	<a href="#xarModURL('xarbb','user','newtopic',array('tid' => $loop:item['tid']))#"><xar:mlstring>Edit</xar:mlstring></a> | 
    	<a href="#xarModURL('xarbb','user','deletetopic',array('tid' => $loop:item['tid']))#"><xar:mlstring>Delete</xar:mlstring></a>
    </td>
	</xar:sec>
  </tr>
<xar:else />
  <tr>
    <td width="21" class="xar-accent">&nbsp;</td>
    <td width="21">
    <!--- Uncomment to display folder icon, hot topic, and hottest topic icons  
    #$loop:item['folder']#
    --->
    &nbsp;
    </td>
    <td><a href="#xarModURL('xarbb', 'user', 'viewtopic', array('tid' => $loop:item['tid']))#">#$loop:item['ttitle']#</a></td>
    <td width="100" align="center"><a href="#xarModUrl('roles', 'user', 'display', array('uid' => $loop:item['authorid']))#">#$loop:item['replyname']#</a></td>
    <td width="75" class="xar-accent" align="center">#$loop:item['comments']#</td>
    <td width="75" class="xar-accent" align="center">#$loop:item['hitcount']#</td>
    <td width="130" class="xar-accent" align="right" valign="top">#$loop:item['ttime']#</td>
	<xar:sec mask="EditxarBB" catch="false">
    <td class="xar-accent" align="right" valign="top">
    	<a href="#xarModURL('xarbb','user','newtopic',array('tid' => $loop:item['tid']))#"><xar:mlstring>Edit</xar:mlstring></a> | 
    	<a href="#xarModURL('xarbb','user','deletetopic',array('tid' => $loop:item['tid']))#"><xar:mlstring>Delete</xar:mlstring></a>
    </td>
	</xar:sec>
  </tr>
</xar:if>
</xar:loop>
</table>
<br />
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
	<xar:sec mask="PostxarBB" catch="false">
    <td width="50%"><a href="#xarModURL('xarbb', 'user', 'newtopic', array('fid' => $fid))#"><xar:mlstring>Post a New Topic</xar:mlstring></a></td>
	</xar:sec>
	<xar:if condition="xarThemeIsAvailable('rss')">
    <td width="50%"><a href="#xarModURL('xarbb', 'user', 'viewforumrss', array('fid' => $fid, 'theme' => 'rss'))#"><xar:mlstring>Syndicate This Forum</xar:mlstring></a></td>
	</xar:if>
<!--  Need an API Forum Picker.
	<form method="POST">
        <table border="0" cellpadding="3" cellspacing="0">

          <tr>
            <td align="right"><b><font face="Verdana" size="2">Forums : </font></b></td>
            <td align="center">
              <select>
                <option>Forum Title One</option>
                <option>Forum Title Two</option>
                <option>Forum Title Three</option>

                <option>Forum Title Four</option>
                <option>Forum Title Five</option>
              </select>
            </td>
            <td><input type="image" name="Go" src="images/go.gif" width="34" height="25"></td>
          </tr>
        </table>
      </form>
 -->
    </td>
  </tr>
</table>
