
Privileges for the xarpages module
==================================

The components are:

page            A page, identified by a unique ID and a non-unique name.
pagetype        A page itemtype, identified by a unique ID and a unique name.

The instances for the page component are:

type_id         SELECT xar_ptid FROM [xar_]xarpages_types
type_name       SELECT xar_name FROM [xar_]xarpages_types
page_id         SELECT xar_pid FROM [xar_]xarpages_pages
page_name       SELECT DISTINCT xar_name FROM [xar_]xarpages_pages

The instances for the pagetype component are:

type_id         SELECT xar_ptid FROM [xar_]xarpages_types
type_name       SELECT xar_name FROM [xar_]xarpages_types

The masks (with explicit user functions) for the page component are:

ACCESS_OVERVIEW n/a
ACCESS_READ     A page can be viewed (user display).
ACCESS_COMMENT  n/a
ACCESS_MODERATE A page content and hooks can be changed. Overview of pages allowed.
ACCESS_EDIT     A page can be moved and renamed.
ACCESS_ADD      New pages can be added and existing pages can be moved and renamed.
ACCESS_DELETE   A page can be removed completely.
ACCESS_ADMIN    n/a

The masks for the pagetype component are:

ACCESS_OVERVIEW n/a
ACCESS_READ     n/a
ACCESS_COMMENT  n/a
ACCESS_MODERATE Overview of page type allowed.
ACCESS_EDIT     Change description and hooks
ACCESS_ADD      n/a
ACCESS_DELETE   n/a
ACCESS_ADMIN    Page types can be added, deleted and renamed.


Note: if a user does not have privileges to add or delete a page, then they
should not be able to move or change the name of that page either.

TODO: do we really need the ID in the instances? Would the name alone be enough?

TODO: three things to make privileges easier:-

1. Change the name of the function xarDefineInstance() to xarDefineComponent()
2. Allow the masks to take a comment field when registering. The database column
   already seems to be there. (Actually, this is done, but seldom used.)
3. Allow the instance query to return two columns: the displayed value and the
   returned value. An ID alone is often not enough.

