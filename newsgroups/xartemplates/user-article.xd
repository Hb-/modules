<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>Newsgroups Module</xar:mlstring>
    </span>
</div>

<div class="xar-mod-body">
    <h2><xar:mlstring>Read Message</xar:mlstring></h2>
    <p>#$pager# <a href="#xarModUrl('newsgroups', 'user', 'group', array('group' => $group))#"><xar:ml><xar:mlstring>Back to newsgroup #(1)</xar:mlstring><xar:mlvar>#$group#</xar:mlvar></xar:ml></a></p>
    <xar:if condition="isset($error_message)">
        <p> <xar:mlstring>News Server Error:</xar:mlstring>
            <span style="color: red;">
                #$error_message#
            </span>
        </p>
    <xar:else />
        <div style="margin: auto;">
            <xar:sec mask="SendNewsGroups" catch="false">
            <p>
                <a href="#xarModUrl('newsgroups', 'user', 'post', array('group' => $group, 'article' => $articlenum, 'phase' => 'reply'))#"><xar:mlstring>Post a reply</xar:mlstring></a>
            </p>
            </xar:sec>
            <div class="xar-norm-outline" style="margin: 0px 3px 6px 3px;padding: 3px;text-align: left;">
                <div class="xar-norm" style="padding: 3px;">

                    <xar:mlstring>Subject</xar:mlstring>:&nbsp;&nbsp;<b>#$headers['Subject']#</b><br />
                    <xar:mlstring>From</xar:mlstring>:&nbsp;&nbsp;<b>#$headers['From']#</b><br />
                    <xar:mlstring>Organization</xar:mlstring>:&nbsp;&nbsp;<b><xar:if condition="!empty($headers['Organization'])">#$headers['Organization']#<xar:else/>-</xar:if></b><br />
                    <xar:mlstring>Date</xar:mlstring>:&nbsp;&nbsp;<b>#$headers['Date']#</b><br />
                    <xar:mlstring>Newsgroups</xar:mlstring>:&nbsp;&nbsp;<b>#$headers['Newsgroups']#</b><br />
                    <xar:if condition="isset($headers['References']) && is_array($headers['References'])">
                        <xar:mlstring>References</xar:mlstring>:&nbsp;
                        <xar:foreach in="$headers['References']" key="$key" value="$ref">
                            <xar:if condition="is_numeric($ref)">
                                <a href="#xarModUrl('newsgroups', 'user', 'article', array('group' => $group, 'article' => $ref))#">#$ref#</a>
                            <xar:else/>
                                <a href="#xarModUrl('newsgroups', 'user', 'article', array('group' => $group, 'messageid' => $ref))#">#$key + 1#</a>
                            </xar:if>
                        </xar:foreach><br />
                    </xar:if>
                    <br />
                    <br />
                    #$article#
                </div>
            </div>
            <p>#$pager#</p>
        </div>
    </xar:if>
</div>
